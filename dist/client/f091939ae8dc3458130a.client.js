/*! For license information please see f091939ae8dc3458130a.client.js.LICENSE.txt */
(()=>{"use strict";var __webpack_modules__={"./src/client/cl_main.ts":function(__unused_webpack_module,exports,__webpack_require__){eval("\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nconst character_1 = __importDefault(__webpack_require__(/*! ./classes/character */ \"./src/client/classes/character.ts\"));\r\nconst functions_1 = __webpack_require__(/*! ../shared/functions */ \"./src/shared/functions.ts\");\r\nconst events_1 = __webpack_require__(/*! ../shared/events */ \"./src/shared/events.ts\");\r\non('playerSpawned', () => __awaiter(void 0, void 0, void 0, function* () {\r\n    console.log('Player spawned');\r\n    // @ts-ignore\r\n    while (!Citizen.invokeNative('0xA0BC8FAED8CFEB3C', PlayerPedId())) {\r\n        yield functions_1.Delay(1000);\r\n        console.log('waiting for player to be ready');\r\n    }\r\n    emitNet(events_1.CharacterEvents.FETCH_CHARACTERS);\r\n}));\r\nsetImmediate(() => {\r\n    emitNet(events_1.CharacterEvents.FETCH_CHARACTERS);\r\n});\r\nRegisterCommand('getchars', () => {\r\n    emitNet(events_1.CharacterEvents.FETCH_CHARACTERS);\r\n}, false);\r\n// keeping it 'any' for now.\r\nonNet(events_1.CharacterEvents.SEND_CHARACTERS, (characters) => {\r\n    console.log('characters');\r\n    console.log(characters);\r\n    __webpack_require__.g.exports['chip-ui'].NUISendCharacters(characters);\r\n});\r\nonNet(events_1.CharacterEvents.SEND_CLOTHING, (body, clothing) => __awaiter(void 0, void 0, void 0, function* () {\r\n    yield character_1.default.loadPlayer('mp_male', body, clothing);\r\n}));\r\nRegisterCommand('setmodel', () => __awaiter(void 0, void 0, void 0, function* () {\r\n    emitNet(events_1.CharacterEvents.FETCH_CLOTHING);\r\n}), false);\r\nRegisterCommand('ismale', () => {\r\n    console.log('isMale', IsPedMale(PlayerPedId()));\r\n}, false);\r\n\n\n//# sourceURL=webpack://chip-character/./src/client/cl_main.ts?")},"./src/client/classes/character.ts":function(__unused_webpack_module,exports,__webpack_require__){eval("\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nconst functions_1 = __webpack_require__(/*! ../../shared/functions */ \"./src/shared/functions.ts\");\r\nclass _Character {\r\n    constructor() {\r\n        console.log('Character service started');\r\n    }\r\n    loadPlayer(model, body, clothing) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            try {\r\n                yield this.fixPedIssues(PlayerPedId());\r\n                yield this.setModel(model);\r\n                yield functions_1.Delay(500);\r\n                this.loadBody(PlayerPedId(), body);\r\n                this.loadClothes(PlayerPedId(), clothing);\r\n                console.log('Loaded Player');\r\n            }\r\n            catch (e) {\r\n                console.log(`Failed to load player. Error: ${e.message}`);\r\n            }\r\n        });\r\n    }\r\n    setModel(model) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            const modelHash = GetHashKey(model);\r\n            RequestModel(modelHash);\r\n            while (!HasModelLoaded(modelHash)) {\r\n                yield functions_1.Delay(100);\r\n                RequestModel(modelHash);\r\n            }\r\n            // SetPlayerModel\r\n            Citizen.invokeNative('0xED40380076A31506', PlayerId(), modelHash, false);\r\n            // SetPedOutfitPreset\r\n            Citizen.invokeNative('0x77FF8D35EEC6BBC4', PlayerPedId(), 0, false);\r\n            // @ts-ignore\r\n            while (!Citizen.invokeNative('0xA0BC8FAED8CFEB3C', PlayerPedId())) {\r\n                yield functions_1.Delay(100);\r\n            }\r\n        });\r\n    }\r\n    loadBody(target, body) {\r\n        for (const [key, value] of Object.entries(body)) {\r\n            Citizen.invokeNative('0xD3A7B003ED343FD9', target, GetHashKey(value), false, true, true);\r\n        }\r\n        // N_0x704c908e9c405136\r\n        Citizen.invokeNative('0x704c908e9c405136', target);\r\n        // N_0xaab86462966168ce\r\n        Citizen.invokeNative('0xaab86462966168ce', target, 1);\r\n        // UpdatePedVariation\r\n        Citizen.invokeNative('0xCC8CA3E88256E58F', target, false, true, true, true, false);\r\n    }\r\n    loadClothes(target, clothing) {\r\n        for (const [key, value] of Object.entries(clothing)) {\r\n            Citizen.invokeNative('0xD3A7B003ED343FD9', target, GetHashKey(value), false, true, true);\r\n        }\r\n        // N_0x704c908e9c405136\r\n        Citizen.invokeNative('0x704c908e9c405136', target);\r\n        // N_0xaab86462966168ce\r\n        Citizen.invokeNative('0xaab86462966168ce', target, 1);\r\n        // UpdatePedVariation\r\n        Citizen.invokeNative('0xCC8CA3E88256E58F', target, false, true, true, true, false);\r\n    }\r\n    /**\r\n     * This apparently fixes some loading stuff for ped components?\r\n     *\r\n     * Credits: https://github.com/RedEM-RP/redemrp_skin/blob/master/client/cl_main.lua#L565\r\n     */\r\n    fixPedIssues(target) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            Citizen.invokeNative('0x77FF8D35EEC6BBC4', target, 0, false);\r\n            // @ts-ignore\r\n            while (!Citizen.invokeNative('0xA0BC8FAED8CFEB3C', target)) {\r\n                yield functions_1.Delay(10);\r\n            }\r\n            Citizen.invokeNative('0x0BFA1BD465CDFEFD', target);\r\n            if (IsPedMale(target)) {\r\n                Citizen.invokeNative('0xD3A7B003ED343FD9', target, GetHashKey('CLOTHING_ITEM_M_BODIES_UPPER_001_V_001'), false, true, true);\r\n                Citizen.invokeNative('0xD3A7B003ED343FD9', target, GetHashKey('CLOTHING_ITEM_M_BODIES_LOWER_001_V_001'), false, true, true);\r\n                Citizen.invokeNative('0xD3A7B003ED343FD9', target, GetHashKey('CLOTHING_ITEM_M_HEAD_001_V_001'), false, true, true);\r\n            }\r\n            else {\r\n                Citizen.invokeNative('0xD3A7B003ED343FD9', target, GetHashKey('CLOTHING_ITEM_F_BODIES_UPPER_001_V_001'), false, true, true);\r\n                Citizen.invokeNative('0xD3A7B003ED343FD9', target, GetHashKey('CLOTHING_ITEM_F_BODIES_LOWER_001_V_001'), false, true, true);\r\n                Citizen.invokeNative('0xD3A7B003ED343FD9', target, GetHashKey('CLOTHING_ITEM_F_HEAD_001_V_001'), false, true, true);\r\n            }\r\n            Citizen.invokeNative('0xD710A5007C2AC539', target, 0x1d4c528a, 0);\r\n            Citizen.invokeNative('0xD710A5007C2AC539', target, 0x3f1f01e5, 0);\r\n            Citizen.invokeNative('0xD710A5007C2AC539', target, 0xda0e2c55, 0);\r\n            Citizen.invokeNative('0x704C908E9C405136', target);\r\n            Citizen.invokeNative('0xCC8CA3E88256E58F', target, false, true, true, true, false);\r\n        });\r\n    }\r\n}\r\nconst Character = new _Character();\r\nexports.default = Character;\r\n\n\n//# sourceURL=webpack://chip-character/./src/client/classes/character.ts?")},"./src/client/client.ts":(__unused_webpack_module,exports,__webpack_require__)=>{eval('\r\nObject.defineProperty(exports, "__esModule", ({ value: true }));\r\n__webpack_require__(/*! ./cl_main */ "./src/client/cl_main.ts");\r\n\n\n//# sourceURL=webpack://chip-character/./src/client/client.ts?')},"./src/shared/events.ts":(__unused_webpack_module,exports)=>{eval('\r\nObject.defineProperty(exports, "__esModule", ({ value: true }));\r\nexports.CharacterEvents = void 0;\r\nvar CharacterEvents;\r\n(function (CharacterEvents) {\r\n    CharacterEvents["FETCH_CLOTHING"] = "character:fetchClothing";\r\n    CharacterEvents["SEND_CLOTHING"] = "character:sendClothing";\r\n    CharacterEvents["FETCH_CHARACTERS"] = "character:fetchCharacters";\r\n    CharacterEvents["SEND_CHARACTERS"] = "character:sendCharacters";\r\n    CharacterEvents["SELECT_CHARACTER"] = "character:selectCharacter";\r\n})(CharacterEvents = exports.CharacterEvents || (exports.CharacterEvents = {}));\r\n\n\n//# sourceURL=webpack://chip-character/./src/shared/events.ts?')},"./src/shared/functions.ts":(__unused_webpack_module,exports)=>{eval('\r\n/*\r\nexport const Delay = async (ms: number) => new Promise(res => setTimeout(res, ms))*/\r\nObject.defineProperty(exports, "__esModule", ({ value: true }));\r\nexports.Delay = void 0;\r\nconst Delay = (ms) => new Promise(res => setTimeout(res, ms));\r\nexports.Delay = Delay;\r\n\n\n//# sourceURL=webpack://chip-character/./src/shared/functions.ts?')}},__webpack_module_cache__={};function __webpack_require__(e){var r=__webpack_module_cache__[e];if(void 0!==r)return r.exports;var t=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(t.exports,t,t.exports,__webpack_require__),t.exports}__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();var __webpack_exports__=__webpack_require__("./src/client/client.ts")})();